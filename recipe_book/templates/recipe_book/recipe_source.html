{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h2>Recipe Source</h2>
    {% if recipe %}
        <div class="card mb-3">
            <div class="card-body">
                <h4 class="card-title">{{ recipe.name }}</h4>
                <div><strong>Upload Method:</strong> {{ upload.upload_source_type or 'N/A' }}</div>
                <div><strong>Source URL:</strong> <a href="{{ upload.upload_source_detail }}" target="_blank">{{ upload.upload_source_detail }}</a></div>
                <div class="mt-2">
                    <a class="btn btn-dark btn-sm mb-2" data-bs-toggle="collapse" href="#rawDataCollapse" role="button" aria-expanded="false" aria-controls="rawDataCollapse">View Raw Extracted Data</a>
                    <div class="collapse" id="rawDataCollapse">
                        <pre class="bg-light p-2 border">{{ upload.raw_text or '' }}</pre>
                    </div>
                </div>
                <div><strong>Uploaded By:</strong> {{ upload.uploaded_by or 'N/A' }}</div>
                <div><strong>Upload Date:</strong> {{ upload.upload_date or 'N/A' }}</div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Source Details</h5>
                <div>{{ upload.upload_source_detail or 'N/A' }}</div>
                <div class="mt-2">
                    <a class="btn btn-dark btn-sm mb-2" data-bs-toggle="collapse" href="#rawDataCollapse2" role="button" aria-expanded="false" aria-controls="rawDataCollapse2">View Raw Extracted Data</a>
                    <div class="collapse" id="rawDataCollapse2">
                        <pre class="bg-light p-2 border">{{ upload.raw_text or '' }}</pre>
                    </div>
                </div>
            </div>
        </div>
        <a href="{{ url_for('recipe_book.recipe_book_setup') }}" class="btn btn-secondary mt-3">Back to Recipe Book Index</a>
    {% else %}
        <div class="alert alert-danger">Recipe not found.</div>
    {% endif %}
</div>
{% endblock %}
