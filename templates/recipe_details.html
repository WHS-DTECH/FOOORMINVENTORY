<!DOCTYPE html> 
<html> 
  <head> <!-- recipe_details.html--> 
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ recipe.recipe_name or recipe.name or 'Recipe Details' }}</title>
   <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  </head> 
  <body> 

  <!-- Bootstrap 5 Navbar (from class_ingred.html) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">üç≥ Food Room</a>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="/recbk">Recipe Book</a></li>
          <li class="nav-item"><a class="nav-link" href="/class_ingredients">Class Ingredients</a></li>
          <li class="nav-item"><a class="nav-link" href="/shoplist">Shopping List</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin">Admin</a></li>
        </ul>
        <div class="d-flex">
          {% if current_user.is_authenticated %}
            <span class="me-2">{{ current_user.name }} <span class="badge bg-secondary">{{ current_user.role }}</span></span>
            <a href="/logout" class="btn btn-outline-danger btn-sm">Logout</a>
          {% else %}
            <a href="/login" class="btn btn-outline-primary btn-sm">Login</a>
          {% endif %}
        </div>
      </div>
    </div>
  </nav>

    <div class="container d-flex justify-content-center align-items-center" style="min-height: 60vh;">
      <div class="card shadow-lg p-4" style="max-width: 600px; width: 100%; border-radius: 18px; background: #fffefb;">
        {% if error %}
          <div class="alert alert-danger">{{ error }}</div>
        {% elif recipe %}
          <div class="d-flex flex-column align-items-center mb-3">
            <h1 class="display-5 fw-bold text-primary mb-2" style="text-align:center;">{{ recipe.name }}</h1>
            {% if recipe.image_url %}
              <img src="{{ recipe.image_url }}" alt="{{ recipe.name }}" class="img-fluid rounded shadow-sm mb-3" style="max-width:320px;"/>
            {% endif %}
          </div>
          <h3 class="mt-3 mb-2 text-success d-flex align-items-center">Ingredients
            {% if recipe.serving_size %}
              <span class="badge bg-secondary ms-3" style="font-size:0.7em;">Serves {{ recipe.serving_size }}</span>
            {% endif %}
          </h3>
          <ul class="list-unstyled mb-4">
            {% for ing in recipe.ingredients %}
              <li class="mb-1">
                <span class="badge bg-light text-dark border me-2" style="font-size:1em; min-width:60px;">{{ ing.quantity or '' }} {{ ing.unit or '' }}</span>
                <span class="fw-semibold">{{ ing.name or ing.ingredient or ing }}</span>
              </li>
            {% endfor %}
          </ul>
          <h3 class="mt-4 mb-2 text-info">Instructions</h3>
          <div class="recipe-instructions bg-light p-3 rounded shadow-sm mb-3" style="font-size:1.08em; line-height:1.7;">
            {% if recipe.instructions %}
              <ol class="ps-3">
                {% for step in recipe.instructions.split('\n') if step.strip() %}
                  <li>{{ step }}</li>
                {% endfor %}
              </ol>
            {% else %}
              <em>No instructions provided.</em>
            {% endif %}
          </div>
          {% if recipe.serving_size %}
            <div class="mb-2"><span class="badge bg-secondary">Servings: {{ recipe.serving_size }}</span></div>
          {% endif %}
        {% else %}
        <div class="alert alert-warning">Recipe not found.</div>
      {% endif %}
    </div>

        <div class="d-flex justify-content-center mt-4">
          <a href="/recbk" class="btn btn-lg btn-outline-primary">&larr; Back to Recipe Book</a>
        </div>
      </div>

  </body>
</html>